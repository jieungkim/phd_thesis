%% For double-blind review submission, w/o CCS and ACM Reference (max submission space)
\documentclass[acmsmall]{acmart}

\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
%\documentclass[acmsmall]{acmart}\settodpmatter{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ADDED: packages

\usepackage[utf8]{inputenc} %for utf8 input
\usepackage{amssymb} %for shift symbol
\usepackage{amsmath}
\usepackage{listings, multicol} %for code
\usepackage{microtype} %better micro typing
\usepackage{stmaryrd} %for llbracket
\usepackage{graphicx} %to include png images
\usepackage{bussproofs} %for proof trees
\usepackage{comment}

\usepackage{wrapfig} 
\usepackage{tikz}
\usetikzlibrary{arrows.meta, decorations.pathmorphing}
%----------------------------------------------------
%\usepackage{hyperref}
%\usepackage{mathabx} % for boxes
%\usepackage[usenames,dvipsnames]{color} 
%\usepackage[firstpage]{draftwatermark}
%\SetWatermarkText{\hspace*{8in}\raisebox{4.0in}{\includegraphics[scale=.1]{figs/aec-badge-popl}}}
%\SetWatermarkAngle{0}
%----------------------------------------------------
\usepackage{prettyref}
\newcommand{\pref}[1]{\prettyref{#1}}
\newcommand{\Pref}[1]{\prettyref{#1} \vpageref[]{#1}}
\newcommand{\ppref}[1]{\vpageref[]{#1}}      
\newrefformat{fig}{Figure~\ref{#1}}
\newrefformat{tab}{Table~\ref{#1}}

%----------------------------------------------------

\usepackage{amsthm}
\usepackage{paralist}
\usepackage{enumitem}
%\theoremstyle{newstyle}
%\newtheorem{lemma}{Lemma}
%\newtheorem{corollary}{Corollary}
%\newtheorem{definition}{Definition}
%\newtheorem{theorem}{Theorem}
%\newtheorem{proposition}{Proposition}

%------------------------------------------
%\usepackage[colorlinks=false,allcolors=black,breaklinks,draft=false]{hyperref} 
\newcommand*{\Scale}[2][4]{\scalebox{#1}{$#2$}}
\usepackage{mathpartir}
\usepackage{multirow}
\usepackage[scaled=0.78]{DejaVuSansMono}
\definecolor{dark-gray}{gray}{0.2}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\usepackage{xspace}
\usepackage{tcolorbox}
\usepackage{subfig}
\usepackage{tabularx}
\usepackage{relsize}
\usepackage[font=small,labelfont=bf]{caption}\usepackage[normalem]{ulem}
\usepackage{cancel}
\usepackage{caption}
\usepackage{lipsum}
%\usepackage[dvipsnames]{xcolor}
%\usepackage{MnSymbol}

\DeclareCaptionFormat{myformat}{#1#2#3\vspace{-5pt}\hrulefill}
\captionsetup[figure]{format=myformat}
% ADDED: packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Some recommended packages.
\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs                        
%\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption

%% Journal information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmJournal{PACMPL}
\acmVolume{1}
\acmNumber{CONF} % CONF = POPL or ICFP or OOPSLA
\acmArticle{1}
\acmYear{2018}
\acmMonth{1}
\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}

%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission;
%% use 'none' for review submission.
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2018}           %% If different from \acmYear

%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%% Note: author/year citations are required for papers published as an
%% issue of PACMPL.
\citestyle{acmauthoryear}   %% For author/year citations


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Note: Authors migrating a paper from PACMPL format to traditional
%% SIGPLAN proceedings format must update the '\documentclass' and
%% topmatter commands above; see 'acmart-sigplanproc-template.tex'.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ADDED: sourcecode
\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\ttfamily\footnotesize,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  %captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={<@}{@>},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  %frame=single,	                   % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=Octave,                 % the language of the code
  otherkeywords={uint, ...},     
  deletekeywords={get},
        % if you want to add more keywords to the set
  emph = {in, match, end, with, let,ret, do, forall, exist},
  emphstyle=\color{teal},%
  moredelim=[is][emphstyle]{|>}{<|},%
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=2pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  %title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
  %xrightmargin = -10pt,   
 aboveskip = 8pt,
 xleftmargin = 3pt,
}
% ADDED: sourcecode
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ADDED:  local definitions 
\input{local}  % all the local macros used in the paper
%% ADDED:  local definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

%----------------------------------------------------

\title{Multicore and Multithreaded linking in Concurrent Program Verification}

\maketitle

\input{ccaldefinitions}

\input{multicore}
\input{multicorerefinement}
\input{multicorelink}

\input{multithreaded}
\input{multithreadedrefinement}
\input{multithreadedlink}

%\input{multithreaded}


%% Bibliography style
%\bibliographystyle{ACM-Reference-Format}
%% Citation style
%% Note: author/year citations are required for papers published as an
%% issue of PACMPL.
%\citestyle{acmauthoryear}   %% For author/year citations
% \bibliography{refs}

% \appendix

%% \input{notations} % Table of notations (will not be included in the
%%                   % submitted version).

\end{document}
