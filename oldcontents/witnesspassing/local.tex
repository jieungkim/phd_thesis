%% Anonymization
\newif \ifanonymized \anonymizedfalse

\ifanonymized
\newcommand\CTOS{CTOS}
\else
\newcommand\CTOS{CertiKOS}
\fi
%% END Anonymization

\ifTRthen
\newcommand{\ifTR}[2]{#1}
\else
\newcommand{\ifTR}[2]{#2}
\fi

\newcommand\raw{x86}
\newcommand\sys{ker}
\newcommand\layer[3]{(#1,#2,#3)}


\newcommand\sem[2]{[\![#2]\!]_{#1}}
\newcommand\join{\!\bowtie\!}
\newcommand\Refrel{\sqsubseteq}
\newcommand\ClightX[1]{\textrm{ClightX(}#1\textrm{)}}
\newcommand\CompCertX[1]{\textrm{CompCertX(}#1\textrm{)}}
\usepackage{multirow}
\newtheorem{invariant}{Invariant}
\newcommand\ignore[1]{}

%% COMMENTS
\newif \ifcomments \commentstrue

\ifcomments
\newcommand{\zhong}[1]{\textbf{\textcolor{red}{[ #1 --Zhong]}}}
\newcommand{\jiyong}[1]{\textbf{\textcolor{blue}{[ #1 -- Ji-Yong]}}}
\newcommand{\wolf}[1]{\textbf{\textcolor{green}{[ #1 -- Wolf]]}}}
\newcommand{\lucas}[1]{\textbf{\textcolor{cyan}{[ #1 -- Lucas]}}}
\newcommand{\jieung}[1]{\textbf{\textcolor{violet}{[ #1 -- Jieung]}}}
\else
\newcommand{\zhong}[1]{}
\newcommand{\jiyong}[1]{}
\newcommand{\wolf}[1]{}
\newcommand{\lucas}[1]{}
\newcommand{\jieung}[1]{}
\fi
%% END COMMENTS

\newif \iftopics \topicsfalse
\iftopics
\newcommand{\topic}[1]{{\textcolor{gray}{[#1]\\}}}
\newcommand{\subtopic}[1]{{\textcolor{gray}{[#1]\\}}}
\else
\newcommand{\topic}[1]{}
\newcommand{\subtopic}[1]{}
\fi

% keyword
\newcommand{\sysname}{Throne}
\newcommand{\coq}{Coq}
\newcommand{\needcite}[1]{\textbf{\textcolor{red}{[cite: #1]}}}
\newcommand{\citethese}[1]{\textbf{\textcolor{red}{[cite: #1]}}}
\newcommand{\checkterms}[1]{\textbf{\textcolor{blue}{#1}}}
\newcommand{\globalstate}{global model}
\newcommand{\Globalstate}{Global model}

% Orders on layers and behaviors: \lsim and \lle correspond to QuiverSim,
% whereas \lpath corresponds to CategorySim.
\newcommand{\lle}{\preceq}
\newcommand{\lsim}[1]{\prec_{#1}}
\newcommand{\lpath}[1]{\le_{#1}}
%\newcommand{\lhtap}[1]{\ge_{#1}}
\newcommand{\id}{\textbf{id}}

% Typing judgements
\usepackage{relsize}
\newcommand{\ltyp}[4]{#1 \vdash_{#2} #3 : #4}
\newcommand{\lltyp}[5]{#2 \vdash^{#1}_{#3} #4 : #5}
\newcommand{\rulename}[1]{\textsc{\smaller{}#1}}

% Useful shorthands used in layer.tex
\newcommand{\pcom}{\parallel}
\usepackage{scalerel}
\DeclareMathOperator*{\bigJoin}{\scalerel*{\Join}{\sum}}
\newcommand{\kw}[1]{{\mathsf{#1}}} % render as a keyword
\newcommand{\pset}[1]{{\mathcal{P}({#1})}}
\newcommand{\refines}{\sqsubseteq} % refinement relation


\newcommand{\eg}{{e.g.\xspace}}
\newcommand{\ie}{{i.e.\xspace}}
%\newcommand{\cf}{{\em cf. }}
\newcommand{\cf}{see }
\newcommand{\etal}{{\em et al.\xspace}}
\newcommand\step[1]{\overset{#1}{\rightarrow}}


\newcommand*{\LargerCdot}{\raisebox{0.25ex}{\scalebox{0.7}{$\bullet$}}}
\newcommand\cons{\LargerCdot}
\newcommand\comm[1]{\mathsf{\textcolor{black}{#1}}}
\newcommand\commb[1]{\mathsf{#1}}
%\newcommand\mtext[1]{\mathit{#1}}
\newcommand\set[1]{\{#1\}}
\newcommand\any{\cdot}
\newcommand\nonev{\_}
\newcommand\integer{\mathbb{N}}

% The specification #1 takes a step from (#2, #3) to (#4, #5)
% The second case is for when there's no return value
\newcommand{\sstepr}[5]{#1(#2, #3) \ni (#4, #5)}
\newcommand{\sstep}[4]{#1(#2, #3) \ni (#4)}
\newcommand{\para}[1]{\ifTR{}{\vspace{-4pt}}\paragraph{\textbf{#1}}}
\newcommand{\modulef}[1]{#1 \mapsto \kappa_{#1}}

\newcommand{\remove}[1]{\textcolor{red}{\sout{#1}}}
\newcommand{\added}[1]{\textcolor{blue}{#1}}

\hyphenation{Comp-Cert}




%%%% Witness passing related definitions
\newcommand\sdiff{\triangle}
\newcommand\ssame{\odot}

\newcommand{\envcontext}{\varepsilon}
\newcommand{\layerdef}{\mathcal{L}}
\newcommand{\relyrule}{\mathcal{R}}
\newcommand{\guaranteerule}{\mathcal{G}}
\newcommand{\primid}{id}
\newcommand{\primspec}[1]{\sigma_{#1}}
\newcommand{\igchar}{\_}
\newcommand{\sendpkt}[3]{{#1}.\mathrm{SEND}{[#2]}.{#3}}
\newcommand{\recvpkt}[3]{{#1}.\mathrm{RECV}{[#2]}.{#3}}
\newcommand{\witness}{\varpi}
\newcommand{\updatefunc}{\varrho}
\newcommand{\isquorums}{\mathcal{q}}
\newcommand{\replay}{\mathbb{R}}

\newcommand{\packet}{{\mathbb{E}_{net}}}
\newcommand{\networklog}{{l_{net}}}
\newcommand{\accsset}{\mathbb{S}_{Ca}}
\newcommand{\voters}{\mathbb{S}_{vtr}}
\newcommand{\propset}{\mathbb{S}_{P}}
\newcommand{\fullset}{\mathbb{S}_{D}}
\newcommand{\nodeid}{\mathrm{ID}}
\newcommand{\dsvalue}{\Delta}
\newcommand{\seqnum}{\upsilon}
\newcommand{\termnum}{\rho}
\newcommand{\dstate}{\sigma}
\newcommand{\dobj}{\Sigma}
\newcommand{\gstate}{\Sigma}
\newcommand{\ldrwitness}{{\witness_{ldr}}}
\newcommand{\opwitness}{{\witness_{op}}}

\newcommand{\tplfunction}{\mathcal{T}}
\newcommand{\tplldrfunction}{\tplfunction_{ldr}}
\newcommand{\tplopfunction}{\tplfunction_{op}}
\newcommand{\handlerfunction}{\tplfunction^{A}}
\newcommand{\genericfunction}{\tplfunction^{R}}
\newcommand{\protocolfunction}{\mathcal{G}}
\newcommand{\ldrhfunction}{\handlerfunction_{ldr}}
\newcommand{\ophfunction}{\handlerfunction_{op}}
\newcommand{\ldrfunction}{\genericfunction_{ldr}}
\newcommand{\opfunction}{\genericfunction_{op}}
\newcommand{\gldrfunction}{\protocolfunction_{ldr}}
\newcommand{\gopfunction}{\protocolfunction_{op}}
\newcommand{\sendfunction}{\delta_{snd}}
\newcommand{\recvfunction}{\delta_{rcv}}

\newcommand{\msg}{\mathrm{msg}}
\newcommand{\argus}{\mathrm{args}}
\newcommand{\chid}{\mathrm{cid}}

\newcommand{\ldrwcons}{\mathcal{C}_{ldr\witness}}
\newcommand{\opwcons}{\mathcal{C}_{op\witness}}
\newcommand{\conwcons}{\mathcal{C}_{con\witness}}

\newcommand\mdoubleplus{\ensuremath{\mathbin{+\mkern-4mu+}}}


\ignore{
\newcommand{\canrecv}{\mathrm{valid_{recv}}}
\newcommand{\getsrc}{\mathrm{getSrc}}
\newcommand{\getowner}{\mathrm{getOwner}}
\newcommand{\getdes}{\mathrm{getDes}}
\newcommand{\checkcidone}{{\mathrm{checkCid}_1}}
\newcommand{\checkcidtwo}{{\mathrm{checkCid}_2}}
\newcommand{\lstate}[1]{\mathrm{lst}_{#1}}
\newcommand{\stfori}[1]{\mathrm{st}_{#1}}
\newcommand{\fsendpkt}[4]{[{#1}.\mathrm{SEND}\langle{#2}\rangle{[#3]}.{#4}]}
\newcommand{\frecvpkt}[4]{[{#1}.\mathrm{RECV}\langle{#2}\rangle{[#3]}.{#4}]}
\newcommand{\ftimeoutpkt}[2]{[{#1}.\mathrm{TOUT}\langle{#2}\rangle]}
\newcommand{\fghostpkt}[3]{[{#1}.\mathrm{GHOST}\langle{#2}\rangle[{#3}]]}
\newcommand{\layerfori}[1]{L{[#1]}}
\newcommand{\propsset}{\mathrm{PSET}}
\newcommand{\propkwd}{\mathrm{PROP}}
\newcommand{\dsset}{\mathrm{DSET}}
\newcommand{\getcid}{{\mathrm{getCid}}}
\newcommand{\partialset}{\mathrm{accs}}
\newcommand{\acceptors}{\mathrm{ASET}}
\newcommand{\funwitness}{\mathcal{F}_{\witness}}
\newcommand{\getbn}{\mathrm{getBN}}
\newcommand{\getvbn}{\mathrm{getVBN}_{msg}}
\newcommand{\getvbnp}{\mathrm{getVBN}_{\packet}}
\newcommand{\getdsvalue}{\mathrm{getVal}_{\packet}}
\newcommand{\getwitness}{\mathrm{get}\witness_{\packet_{\witness}}}
\newcommand{\projpkt}{\mathrm{proj}_{\packet}}
\newcommand{\projnet}{\mathrm{proj}_{\mathrm{net}}}
\newcommand{\votedballotnum}{\mathrm{vbn}}}
